(this["webpackJsonplearn-three"]=this["webpackJsonplearn-three"]||[]).push([[0],{129:function(e,t,n){e.exports=n(330)},133:function(e,t,n){},135:function(e,t,n){var a={"./bulb.svg":136,"./claw.svg":137,"./drop-01.svg":138,"./drop-narrow.svg":139,"./drop.svg":140,"./droplet.svg":141,"./feather.svg":142,"./hexagon.svg":143,"./hook.svg":144,"./leaf-simple.svg":145,"./logo.svg":146,"./poker-sharp-01.svg":147,"./poker-sharp.svg":148,"./poker.svg":149};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=135},136:function(e,t,n){e.exports=n.p+"static/media/bulb.d3a1ee51.svg"},137:function(e,t,n){e.exports=n.p+"static/media/claw.a1763bbc.svg"},138:function(e,t,n){e.exports=n.p+"static/media/drop-01.57c76527.svg"},139:function(e,t,n){e.exports=n.p+"static/media/drop-narrow.494cfd42.svg"},140:function(e,t,n){e.exports=n.p+"static/media/drop.5a97d7ac.svg"},141:function(e,t,n){e.exports=n.p+"static/media/droplet.b2f0e25e.svg"},142:function(e,t,n){e.exports=n.p+"static/media/feather.d9a36528.svg"},143:function(e,t,n){e.exports=n.p+"static/media/hexagon.6bbb3d58.svg"},144:function(e,t,n){e.exports=n.p+"static/media/hook.3f451594.svg"},145:function(e,t,n){e.exports=n.p+"static/media/leaf-simple.f3f086d7.svg"},146:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},147:function(e,t,n){e.exports=n.p+"static/media/poker-sharp-01.e5da0332.svg"},148:function(e,t,n){e.exports=n.p+"static/media/poker-sharp.e5da0332.svg"},149:function(e,t,n){e.exports=n.p+"static/media/poker.b001a47e.svg"},150:function(e,t,n){var a={"./basic-flower.json":151,"./blue-tiles.json":152,"./drops.json":153,"./feather-poker.json":154,"./kennedith.json":155,"./materials.json":156};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=150},151:function(e){e.exports=JSON.parse('{"layers":[{"url":"/svg/drop-01.svg","fillColor":"MOONLIGHT","radius":0,"numPoints":4},{"url":"/svg/droplet.svg","fillColor":"PEA","radius":0,"numPoints":8,"scale":0.5,"strokeWidth":20}]}')},152:function(e){e.exports=JSON.parse('{"layers":[{"url":"/svg/drop-01.svg","fillColor":"SLATE","radius":50,"numPoints":8,"strokeWidth":20,"strokeColor":"SUNLIGHT"},{"url":"/svg/drop-01.svg","fillColor":"NEW_ENGLAND","textureUrl":"/img/mosaic.jpg","radius":50,"numPoints":8,"scale":0.9,"zPosition":10},{"url":"/svg/drop-narrow.svg","fillColor":"TEAL","opacity":0.6,"radius":50,"numPoints":8,"zPosition":80,"scale":0.8,"depth":50,"strokeWidth":20,"strokeColor":"SUNLIGHT"},{"url":"/svg/claw.svg","fillColor":"MOONLIGHT","radius":50,"numPoints":4,"zPosition":100,"depth":200,"scale":0.4}]}')},153:function(e){e.exports=JSON.parse('{"layers":[{"url":"/svg/drop.svg","fillColor":"MOONLIGHT","radius":50,"numPoints":12},{"url":"/svg/drop-01.svg","fillColor":"NEW_ENGLAND","radius":50,"numPoints":10,"scale":0.95,"zPosition":10},{"url":"/svg/drop-narrow.svg","fillColor":"TEAL","radius":50,"numPoints":8,"zPosition":20,"scale":0.8}]}')},154:function(e){e.exports=JSON.parse('{"layers":[{"url":"/svg/bulb.svg","fillColor":"MOONLIGHT","radius":50,"numPoints":8},{"url":"/svg/poker.svg","fillColor":"SLATE","radius":50,"numPoints":6,"scale":0.95,"zPosition":10},{"url":"/svg/poker-sharp-01.svg","fillColor":"NEW_ENGLAND","radius":50,"numPoints":8,"scale":0.95,"zPosition":10},{"url":"/svg/feather.svg","fillColor":"PEA","radius":50,"numPoints":8,"zPosition":20,"scale":0.8}]}')},155:function(e){e.exports=JSON.parse('{"layers":[{"url":"/svg/bulb.svg","fillColor":"LAVENDER","radius":50,"numPoints":6,"depth":50},{"url":"/svg/droplet.svg","fillColor":"SLATE","radius":80,"numPoints":9,"scale":0.8,"zPosition":100},{"url":"/svg/droplet.svg","textureUrl":"/img/concrete.jpg","fillColor":"NEW_ENGLAND","radius":50,"numPoints":9,"scale":0.7,"zPosition":110},{"url":"/svg/poker-sharp.svg","fillColor":"PEA","radius":50,"numPoints":9,"scale":0.3,"zPosition":120,"opacity":0.8}]}')},156:function(e){e.exports=JSON.parse('{"layers":[{"url":"/svg/drop-01.svg","textureUrl":"/img/marble-white.jpg","radius":100,"numPoints":6},{"url":"/svg/drop.svg","textureUrl":"/img/wood-hexagons.jpg","radius":50,"numPoints":6,"scale":0.8,"strokeWidth":10,"strokeColor":"SLATE"},{"url":"/svg/bulb.svg","textureUrl":"/img/birch.jpg","radius":50,"numPoints":9,"scale":0.7},{"url":"/svg/drop-narrow.svg","fillColor":"LAVENDER","radius":50,"numPoints":6,"scale":0.3,"phong":true,"opacity":0.5,"highlight":{"fillColor":"MOONLIGHT","strokeColor":"TEAL","strokeWidth":20,"textureUrl":null}}]}')},330:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"SUNLIGHT",(function(){return f})),n.d(a,"MOONLIGHT",(function(){return h})),n.d(a,"TEAL",(function(){return v})),n.d(a,"PEA",(function(){return b})),n.d(a,"SLATE",(function(){return E})),n.d(a,"NEW_ENGLAND",(function(){return y})),n.d(a,"LAVENDER",(function(){return k}));var r,o,i=n(0),s=n.n(i),l=n(12),c=n.n(l),u=(n(82),n(133),n(134),n(23)),m=n(6),p=n(15),d=n(29),g=n(79),f="#e9c46a",h="#a8dadc",v="#2a9d8f",b="#90be6d",E="#14213d",y="#457b9d",k="#6D72C3",x=(r=n(135)).keys().reduce((function(e,t){return e[t.replace("./","")]=r(t),e}),{}),C=function(e){return e.keys().reduce((function(t,n){return t[n.replace("./","")]=e(n),t}),{})}(n(150)),O=Object.keys(C).map((function(e){var t,n=C[e];return{name:n.name||e,layers:(t=n.layers,Object(g.b)(t.map((function(e,t){e.id||(e.id=t+1),a[e.fillColor]&&(e.fillColor=a[e.fillColor]),a[e.strokeColor]&&(e.strokeColor=a[e.strokeColor]),e.highlight&&(a[e.highlight.fillColor]&&(e.highlight.fillColor=a[e.highlight.fillColor]),a[e.highlight.strokeColor]&&(e.highlight.strokeColor=a[e.highlight.strokeColor]));var n=e.url.split("/").pop();return x[n]&&(e.url=x[n]),e.textureUrl&&(e.textureUrl="/learn-three"+e.textureUrl),e.zPosition||(e.zPosition=10*t),[e.id,Object(g.a)(e)]}))))}})),P=n(117);Object(p.d)({OrbitControls:P.a});var j=0,w=function(e){var t=e.animating;o||(o=Date.now());var n=Object(p.h)(),a=n.camera,r=n.gl.domElement,l=Object(i.useRef)();return Object(p.f)((function(e,n){var a=e.camera;t&&(j+=.2*n),l.current.update(),a.position.set(500*Math.sin(j),500*Math.cos(j),a.position.z)})),s.a.createElement("orbitControls",{ref:l,args:[a,r]})},N=function(e){var t=e.animating,n=e.intensity,a=e.children;return s.a.createElement(s.a.Fragment,null,s.a.createElement(w,{animating:t}),s.a.createElement("gridHelper",{args:[2e3,20],rotation:[Math.PI/2,0,0]}),s.a.createElement("ambientLight",{position:[0,0,500]}),s.a.createElement("pointLight",{position:[0,0,500],intensity:n}),a)},L=n(55),z=n(4),S=n(3);n(9);var T=n(122),A=n(123);Object(p.d)(A);var U={bevelEnabled:!1,steps:1,depth:20,material:0,extrudeMaterial:1},M=function(e){var t=e.url,n=e.rotation,a=e.fillColor,r=e.strokeWidth,o=Object(L.a)(e,["url","rotation","fillColor","strokeWidth"]),l=Object(p.g)(T.a,t),c=Object(i.useMemo)((function(){return l.paths.flatMap((function(e,t){return e.toShapes(!0).map((function(n){return{shape:n,geometry:(new z.Geometry).setFromPoints(n.getPoints()),color:e.color,index:t}}))}))[0]}),[l]);o.textureUrl&&!o.textureUrl.includes("/")&&(o.textureUrl="/learn-three/img/"+o.textureUrl);var d=Object(p.g)(z.TextureLoader,o.textureUrl?[o.textureUrl]:[]),g=Object(m.a)(d,1)[0];g&&(g.wrapS=g.wrapT=z.MirroredRepeatWrapping,g.offset.set(0,0),g.repeat.set(.001,.001));var f={opacity:o.opacity||1};a&&(f.color=a);var v={position:o.position,rotation:[0,0,n||0],scale:o.scale},b=Object(u.a)({},U,{depth:o.depth||10}),E={strokeWidth:r,strokeColor:o.strokeColor||h},y=function(e){return e.phong?s.a.createElement("meshPhongMaterial",Object.assign({attach:"material",shininess:100,specular:h},e)):s.a.createElement("meshStandardMaterial",Object.assign({attach:"material"},e))};return s.a.createElement(s.a.Fragment,null,s.a.createElement("mesh",Object.assign({},v,{receiveShadow:!0,castShadow:!0}),s.a.createElement(y,Object.assign({attach:"material",map:g,transparent:!0},f)),o.extrude?s.a.createElement("extrudeGeometry",{attach:"geometry",args:[c.shape,b]}):s.a.createElement("shapeBufferGeometry",{attach:"geometry",args:[c.shape]})),r&&s.a.createElement("mesh",v,s.a.createElement("meshLine",{attach:"geometry",geometry:c.geometry}),s.a.createElement("meshLineMaterial",{attach:"material",depthTest:!0,lineWidth:r,color:E.strokeColor,sizeAttenuation:!0})))},I=function(e){var t=e.numPoints,n=e.radius,a=e.zPosition,r=void 0===a?0:a,o=e.PointComponent,l=e.ticks,c=Object(L.a)(e,["numPoints","radius","zPosition","PointComponent","ticks"]);return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Array(Math.ceil((t-e)/n)).fill(e).map((function(e,t){return e+t*n}))}(0,360,360/t).map((function(e,a){var u=z.MathUtils.degToRad(e);"number"===typeof c.scale&&(c.scale=[c.scale,c.scale,c.scale]);var m={};return"number"===typeof l&&(l%t===a&&c.highlight?(m=c.highlight).zPosition=r+10:m={}),s.a.createElement(i.Suspense,{fallback:null,key:a},s.a.createElement(o,Object.assign({key:a,rotation:-u,position:[Math.sin(u)*n,Math.cos(u)*n,(m.zPosition||r)+a]},c,m)))}))};I.defaultProps={numPoints:6,rotations:1,radius:0,zPosition:0,PointComponent:M};var G=I,W=function(e){var t=e.pattern,n=e.ticks;return t.layers.toList().toJS().map((function(e,t){return s.a.createElement(G,Object.assign({key:t},e,{ticks:n}))}))},D=n(2),H=n.n(D),_=n(14),J=n(57),R=n(58),V=n(7),B=n(13),F=n(11),K=n(10),q=n(127),Q=function(e){Object(K.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(V.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={displayColorPicker:!1},e.handleClick=function(){e.setState({displayColorPicker:!e.state.displayColorPicker})},e.handleClose=function(){e.setState({displayColorPicker:!1})},e}return Object(B.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{className:"color-button"},s.a.createElement("div",{style:{backgroundColor:this.props.value,width:34,height:34,display:"inline-block"},onClick:this.handleClick}),s.a.createElement("button",{className:"button is-primary",onClick:this.handleClick},"Pick Color"),this.state.displayColorPicker?s.a.createElement("div",{style:{position:"absolute",zIndex:"2"}},s.a.createElement("div",{style:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},onClick:this.handleClose}),s.a.createElement(q.ChromePicker,{color:this.props.value,onChange:this.props.onChange})):null)}}]),n}(s.a.Component),X=Object(J.a)(J.b),Y=[{name:"numPoints",type:"number",min:1,max:16,step:1},{name:"scale",type:"number",min:.1,max:5,step:.05},{name:"radius",type:"number",min:0,max:1e3,step:20},{name:"zPosition",type:"number",min:0,max:1e3,step:20},{name:"depth",type:"number",min:0,max:199,step:5},{name:"strokeWidth",type:"number",min:0,max:30},{name:"opacity",type:"number",min:.1,max:1,step:.05}],Z=[{label:"None",value:null}].concat(["/img/mosaic.jpg","/img/concrete.jpg","/img/dark-stone.jpg"].map((function(e){return{label:e,value:"/learn-three"+e}}))),$=Object.keys(x).map((function(e){return{label:e,value:x[e]}})),ee=O.map((function(e,t){return{label:e.name,value:t}})),te={container:function(e){return Object(u.a)({},e,{width:200})},option:function(e){return Object(u.a)({},e,{color:"black"})}},ne=function(e){var t=e.labelText,n=e.children;return s.a.createElement(_.b,{horizontal:!0,expanded:!0},s.a.createElement(_.b.Label,{size:"small",className:"is-normal"},s.a.createElement(_.c,{className:"has-text-light"},t)),s.a.createElement(_.b.Body,null,n))},ae=function(e){var t=e.layer,n=e.updatePattern,a=(e.onHide,Object(i.useState)(!1)),r=Object(m.a)(a,2),o=r[0],l=r[1];return s.a.createElement(_.d,{className:"layer-controls is-small"},s.a.createElement("div",{className:"message-header"},s.a.createElement("p",null,"Layer ",t.id),s.a.createElement(_.a,{size:"small",onClick:function(){return l(!o)}},o?"Show":"Hide")),!o&&s.a.createElement("div",{className:"message-body"},Y.map((function(e,a){return function(e,a){return s.a.createElement(ne,{key:a,labelText:e.name},s.a.createElement(X,Object.assign({},e,{type:"range",size:"small",menuPlacement:"auto",menuPosition:"fixed",value:t[e.name]||1,onChange:function(a){n(t.id,e.name,a)}})))}(e,a)})),s.a.createElement(ne,{labelText:"fillColor"},s.a.createElement(Q,{value:t.fillColor,onChange:function(e){n(t.id,"fillColor",e.hex)}})),function(e){var a=t[e]?$.find((function(n){return n.value===t[e]})):$[0];return s.a.createElement(_.b,{horizontal:!0,expanded:!0},s.a.createElement(_.b.Label,{size:"small",className:"is-normal"},s.a.createElement(_.c,{className:"has-text-light"},e)),s.a.createElement(_.b.Body,{style:{width:"300px"}},s.a.createElement(R.a,{options:$,value:a,onChange:function(a){n(t.id,e,a.value)},styles:te})))}("url"),function(e){var a=t[e]?Z.find((function(n){return n.value===t[e]})):Z[0];return s.a.createElement(_.b,{horizontal:!0,expanded:!0},s.a.createElement(_.b.Label,{size:"small",className:"is-normal"},s.a.createElement(_.c,{className:"has-text-light"},e)),s.a.createElement(_.b.Body,{style:{width:"300px"}},s.a.createElement(R.a,{options:Z,value:a,onChange:function(a){n(t.id,e,a.value)},styles:te})))}("textureUrl")))},re=function(e){var t=e.pattern,n=e.patternIndex,a=e.setPatternIndex,r=e.controlsVisible,o=e.setControlsVisible,i=e.intensity,l=e.setIntensity,c=e.updatePattern,u=function(e,t){return s.a.createElement(ae,{key:e.id,layer:e,updatePattern:c})},m=ee[n];return s.a.createElement("div",{className:H()("scene-controls is-dark has-text-light",{visible:r})},s.a.createElement(_.a,{size:"small",onClick:function(){return o(!r)}},r?"Hide":"Show"),r&&s.a.createElement("section",{className:"section"},s.a.createElement(_.d,{className:"global-controls",size:"small"},s.a.createElement(_.d.Body,null,s.a.createElement(ne,{labelText:"Pattern"},s.a.createElement(R.a,{options:ee,value:m,onChange:function(e){return a(e.value)},styles:te})),s.a.createElement(ne,{labelText:"Point light intensity"},s.a.createElement(J.b,{min:.1,max:5,step:.05,value:i,onChange:function(e){return l(e)}})))),t&&t.layers.toList().toJS().map(u)))},oe=n(56),ie=n.n(oe),se=function(e){var t=window.location.protocol+"//"+window.location.host+window.location.pathname+e;window.history.pushState({path:t},"",t)};var le=function(e,t){var n=Object(i.useState)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.search,n=ie.a.parse(t.substring(1));return n[e]}(e)||t),a=Object(m.a)(n,2),r=a[0],o=a[1];return[r,Object(i.useCallback)((function(t){o(t),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.location.search,a=ie.a.parse(n.substring(1)),r=ie.a.stringify(Object(u.a)({},a,Object(S.a)({},e,t)));se("?".concat(r))}(e,t)}),[e])]};function ce(e){var t=e.setTicks,n=Object(i.useRef)(0);return Object(i.useEffect)((function(){console.log("init loop"),new d.Loop((function(e){n.current++,n.current=n.current%16,t(n.current)}),"4n").start(0)}),[t]),null}d.Transport.bpm.value=90,window._transport=d.Transport;var ue=n(81),me=function(){var e=Object(ue.b)({loop:!0,to:{number:4,scale:1.5,zPos:0},from:{number:1,scale:1,zPos:0},config:{duration:7e3},reset:!0});return s.a.createElement(ue.a.mesh,{name:"cone",rotation:[Math.PI/2,0,0],"position-z":e.zPos,"scale-x":e.scale,"scale-y":e.scale,"scale-z":e.scale,castShadow:!0},s.a.createElement("coneGeometry",{attach:"geometry",args:[200,200,32]}),s.a.createElement("meshStandardMaterial",{attach:"material",color:v}))};var pe=function(){var e=Object(i.useState)(!1),t=Object(m.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)(null),o=Object(m.a)(r,2),l=o[0],c=o[1],g=Object(i.useState)(.01),f=Object(m.a)(g,2),h=f[0],v=f[1],b=le("i",0),y=Object(m.a)(b,2),k=y[0],C=y[1],P=Object(i.useState)(O[k]),j=Object(m.a)(P,2),w=j[0],L=j[1],z=Object(i.useState)(!1),S=Object(m.a)(z,2),T=S[0],A=S[1];return Object(i.useEffect)((function(){var e=function(e){if(console.log(e),!e.metaKey)if(32===e.keyCode)n?d.Transport.pause():(d.Transport.start(),console.log("start animating")),a(!n);else if("ArrowLeft"===e.key){var t=(k-1)%O.length;t<0&&(t=O.length-1),C(t),L(O[t])}else if("ArrowRight"===e.key){var r=(k+1)%O.length;C(r),L(O[r])}};return window.addEventListener("keydown",e),console.log("setup key listeners"),function(){window.removeEventListener("keydown",e)}}),[n,k,C]),Object(i.useEffect)((function(){var e=O[k];L(e)}),[k]),s.a.createElement("main",{className:"App"},s.a.createElement(re,{pattern:w,patternIndex:k,setPatternIndex:C,controlsVisible:T,setControlsVisible:A,intensity:h,setIntensity:v,updatePattern:function(e,t,n){L((function(a){return Object(u.a)({},a,{layers:a.layers.setIn([e,t],n)})}))}}),s.a.createElement(ce,{setTicks:c}),s.a.createElement(p.a,{camera:{fov:90,position:[0,0,500],near:100,far:1e4,up:[0,0,100]},onCreated:function(e){window.__scene=e,e.camera.lookAt(0,0,0)}},s.a.createElement(N,{animating:n,intensity:h},s.a.createElement(W,{key:w.name,pattern:w,ticks:l}),s.a.createElement(me,null),s.a.createElement(i.Suspense,{fallback:null},s.a.createElement(M,{url:x["hexagon.svg"],fillColor:E,textureUrl:"concrete.jpg",rotation:0,scale:[10,10,5],position:[0,0,-100],depth:10})))))};c.a.render(s.a.createElement(pe,null),document.getElementById("root"))},82:function(e,t,n){}},[[129,1,2]]]);
//# sourceMappingURL=main.f48174f9.chunk.js.map